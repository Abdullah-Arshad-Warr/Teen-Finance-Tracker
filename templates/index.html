<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoneyFlow | Teen Financial Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Vibrant Growth" -->
    <!-- Application Structure Plan: A single-page application with a fixed sidebar for navigation and a dynamic main content area. This structure provides a seamless, app-like experience without page reloads, keeping users engaged. Key interactions like adding transactions or using the chatbot are handled through modals to maintain context. This dashboard-style layout is ideal for presenting diverse financial information in an organized and accessible manner. The addition of a login/signup modal allows optional authentication, providing a clear entry point for personalized features without restricting general app access. -->
    <!-- Visualization & Content Choices: 
        - Dashboard: Goal: Inform. Method: HTML stat cards & Chart.js donut chart. Interaction: Hover effects, clickable cards. Justification: Provides a quick, scannable overview of financial health.
        - Budget: Goal: Compare/Organize. Method: Interactive Chart.js pie chart and a filterable HTML table. Interaction: Clicking chart segments filters the table. Justification: Connects visual data distribution with detailed transaction logs.
        - Savings: Goal: Motivate. Method: Custom HTML/CSS progress bars. Interaction: "Add Funds" modal. Justification: More visually engaging than standard bars, fostering an emotional emotional connection to goals.
        - Learn/Play: Goal: Educate/Engage. Method: HTML cards for articles, JS-powered trivia, and a chatbot modal. Interaction: Standard game/chat UI. Justification: Separates content consumption from interactive learning, catering to different engagement styles.
        - Login/Signup (Modal): Goal: Optional authentication. Method: HTML forms within a modal. Interaction: Form submission with validation and state change (simulated login/logout), affecting personalized content/buttons. Justification: Offers a flexible user entry experience without blocking general access.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>


<body class="bg-main text-main-heading min-h-screen flex flex-col">

    <!-- Login/Signup Modal -->
    <div id="auth-modal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-xl w-full max-w-md p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="auth-title" class="text-3xl font-bold text-main-heading">Login</h2>
                <button id="close-auth-button" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div id="auth-message" class="text-center text-red-500 mb-4 hidden"></div>

            <!-- Login Form -->
            <form id="login-form" class="space-y-4">
                <div>
                    <label for="login-email" class="block text-sm font-medium text-subtle mb-1">Email</label>
                    <input type="email" id="login-email"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none"
                        placeholder="your@email.com">
                </div>
                <div>
                    <label for="login-password" class="block text-sm font-medium text-subtle mb-1">Password</label>
                    <input type="password" id="login-password"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none"
                        placeholder="********">
                </div>
                <button type="submit" class="w-full btn-primary py-3 rounded-lg text-lg font-semibold">Login</button>
            </form>

            <!-- Signup Form (hidden by default) -->
            <form id="signup-form" class="space-y-4 hidden">
                <div>
                    <label for="signup-email" class="block text-sm font-medium text-subtle mb-1">Email</label>
                    <input type="email" id="signup-email"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none"
                        placeholder="your@email.com">
                </div>
                <div>
                    <label for="signup-password" class="block text-sm font-medium text-subtle mb-1">Password</label>
                    <input type="password" id="signup-password"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none"
                        placeholder="********">
                </div>
                <div>
                    <label for="signup-confirm-password" class="block text-sm font-medium text-subtle mb-1">Confirm
                        Password</label>
                    <input type="password" id="signup-confirm-password"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none"
                        placeholder="********">
                </div>
                <button type="submit" class="w-full btn-primary py-3 rounded-lg text-lg font-semibold">Sign Up</button>
            </form>

            <p class="text-center text-subtle mt-6">
                <span id="toggle-auth-text">Don't have an account?</span>
                <button id="toggle-auth-button" class="text-primary-accent font-semibold hover:underline">Sign
                    Up</button>
            </p>
        </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay md:hidden"></div>

    <div id="main-app-container" class="flex flex-1">
        <!-- Sidebar Navigation -->
        <aside id="sidebar"
            class="bg-card w-64 p-4 flex-shrink-0 flex flex-col justify-between transition-transform duration-300 -translate-x-full md:translate-x-0 md:relative absolute inset-y-0 left-0 z-30">
            <div>
                <div class="flex items-center gap-3 mb-8">
                    <div class="bg-primary-accent p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold text-main-heading">MoneyFlow</h1>
                </div>

                <nav class="flex flex-col gap-2">
                    <a href="#dashboard"
                        class="nav-item flex items-center gap-3 p-3 rounded-lg text-subtle hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                        </svg>
                        <span>Dashboard</span>
                    </a>
                    <a href="#budget"
                        class="nav-item flex items-center gap-3 p-3 rounded-lg text-subtle hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                        <span>Budget & Spending</span>
                    </a>
                    <a href="#savings"
                        class="nav-item flex items-center gap-3 p-3 rounded-lg text-subtle hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 6v-1m0-1V4m0 2.01M12 18v-2m0-2v-2m0-2v-2m0-2V8m0 0h.01M12 5h.01M12 3h.01M12 19h.01M12 21h.01M5 12h.01M3 12h.01M7 12h.01M19 12h.01M21 12h.01M17 12h.01" />
                        </svg>
                        <span>Savings Goals</span>
                    </a>
                    <a href="#learn"
                        class="nav-item flex items-center gap-3 p-3 rounded-lg text-subtle hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m-9-5.747h18" />
                        </svg>
                        <span>Learn & Play</span>
                    </a>
                    <a href="#profile"
                        class="nav-item flex items-center gap-3 p-3 rounded-lg text-subtle hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <span>Profile & Settings</span>
                    </a>
                </nav>
            </div>
            <div class="mt-8">
                <button id="chatbot-button"
                    class="w-full flex items-center justify-center gap-3 p-3 rounded-lg bg-gray-100 text-subtle hover:bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                    </svg>
                    <span>Chatbot</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col min-h-0">
            <!-- Header -->
            <header class="bg-card p-4 flex justify-between items-center border-b border-gray-200">
                <button id="menu-button" class="md:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <h2 id="page-title" class="text-xl font-semibold text-main-heading">Dashboard</h2>
                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <p class="font-semibold text-main-heading">Alex Ryder</p>
                        <p id="user-level-xp" class="text-sm text-secondary-accent font-medium">Level 5 | 1,250 XP</p>
                    </div>
                    <img src="https://placehold.co/40x40/20C997/FFFFFF?text=A" alt="User Avatar"
                        class="w-10 h-10 rounded-full">
                    <button id="header-auth-button"
                        class="btn-primary py-2 px-4 rounded-lg text-sm ml-2">Login/Signup</button>
                </div>
            </header>

            <!-- Page Content -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-main p-4 md:p-8 min-h-0">

                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page-content">
                    <p class="text-subtle mb-6">Welcome back, Alex! Here's a quick look at your financial world. This
                        dashboard gives you a snapshot of your income, spending, and progress towards your savings
                        goals, helping you stay on top of your money.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Financial Snapshot -->
                        <div class="bg-card p-6 rounded-lg shadow-sm col-span-1 md:col-span-2 lg:col-span-1">
                            <h3 class="font-semibold mb-4">Financial Snapshot</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-subtle">Money In (This Month)</span>
                                    <span class="font-bold text-green-500 text-lg">$150.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-subtle">Money Out (This Month)</span>
                                    <span class="font-bold text-red-500 text-lg">$85.50</span>
                                </div>
                                <div class="w-full h-2 progress-bar-bg rounded-full my-2"></div>
                                <div class="flex justify-between items-center">
                                    <span class="text-subtle">Current Balance</span>
                                    <span class="font-bold text-main-heading text-xl">$320.75</span>
                                </div>
                            </div>
                        </div>
                        <!-- Budget Summary -->
                        <div class="bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Budget Summary</h3>
                            <div class="chart-container">
                                <canvas id="budgetDoughnutChart"></canvas>
                            </div>
                        </div>
                        <!-- Savings Progress -->
                        <div class="bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Top Savings Goal</h3>
                            <p class="font-semibold text-lg">New Gaming Phone</p>
                            <p class="text-subtle mb-4">Saving for the latest model!</p>
                            <div class="w-full progress-bar-bg rounded-full h-4 mb-2">
                                <div class="progress-bar-fill h-4 rounded-full" style="width: 65%;"></div>
                            </div>
                            <div class="flex justify-between text-sm font-medium">
                                <span class="text-primary-accent">$325 / $500</span>
                                <span>65%</span>
                            </div>
                            <button class="w-full mt-4 btn-primary py-2 rounded-lg">View All Goals</button>
                        </div>
                    </div>
                </div>

                <!-- Budget & Spending Page -->
                <div id="budget-page" class="page-content hidden">
                    <p class="text-subtle mb-6">Track where your money goes. This section helps you understand your
                        spending habits with a detailed breakdown by category and a complete log of all your
                        transactions. Use this to create and stick to a budget.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-2 bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Spending by Category</h3>
                            <div class="chart-container">
                                <canvas id="spendingPieChart"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-3 bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Transaction Log</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="p-2">Date</th>
                                            <th class="p-2">Description</th>
                                            <th class="p-2">Category</th>
                                            <th class="p-2 text-right">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transaction-table-body">
                                        <!-- JS will populate this -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Savings Goals Page -->
                <div id="savings-page" class="page-content hidden">
                    <p class="text-subtle mb-6">Turn your dreams into reality by saving for them. Create goals for
                        things you want, track your progress visually, and celebrate when you reach them. Seeing your
                        savings grow is the best motivation!</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="savings-goals-container">
                        <!-- JS will populate this -->
                    </div>
                </div>

                <!-- Learn & Play Page -->
                <div id="learn-page" class="page-content hidden">
                    <p class="text-subtle mb-6">Boost your financial IQ! Read short articles to learn key money concepts
                        and then test your knowledge with a fun trivia game. The more you learn, the better you'll be at
                        managing your finances.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-bold mb-4">Financial Literacy Articles</h3>
                            <div class="space-y-4" id="articles-container">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                        <div class="bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="text-2xl font-bold mb-4">Trivia Challenge</h3>
                            <div id="trivia-game">
                                <p id="trivia-question" class="text-lg font-semibold mb-4">What does 'ROI' stand for?
                                </p>
                                <div id="trivia-options" class="space-y-3">
                                    <button class="w-full text-left p-3 border rounded-lg hover:bg-gray-100">Return on
                                        Investment</button>
                                    <button class="w-full text-left p-3 border rounded-lg hover:bg-gray-100">Rate of
                                        Inflation</button>
                                    <button class="w-full text-left p-3 border rounded-lg hover:bg-gray-100">Risk of
                                        Insolvency</button>
                                </div>
                                <p id="trivia-feedback" class="mt-4 font-semibold"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile & Settings Page -->
                <div id="profile-page" class="page-content hidden">
                    <p class="text-subtle mb-6">This is your command center. Customize your profile, check your
                        gamification progress and earned badges, and set up helpful reminders to stay on track with your
                        financial goals.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Your Badges</h3>
                            <div class="grid grid-cols-3 sm:grid-cols-4 gap-4" id="badges-container">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                        <div class="bg-card p-6 rounded-lg shadow-sm">
                            <h3 class="font-semibold mb-4">Reminders</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span>Weekly Savings Reminder</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" value="" class="sr-only peer" checked>
                                        <div
                                            class="w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-teal-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-accent">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span>Budget Review Alert</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" value="" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-teal-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-accent">
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <button id="logout-button"
                                class="w-full mt-6 btn-secondary py-2 rounded-lg font-semibold hidden">Logout</button>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Chatbot Modal -->
    <div id="chatbot-modal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-xl w-full max-w-lg flex flex-col h-[80vh]">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 class="text-lg font-semibold">Financial Advice Chatbot</h3>
                <button id="close-chatbot-button" class="text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="chatbot-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
                <div class="flex justify-start">
                    <div class="bg-gray-200 text-main-heading p-3 rounded-lg max-w-xs">
                        Hi Alex! I'm your financial assistant. Ask me anything about saving, budgeting, or investing.
                    </div>
                </div>
            </div>
            <div class="p-4 border-t">
                <div class="flex gap-2">
                    <input id="chatbot-input" type="text" placeholder="Ask a question..."
                        class="flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-primary-accent focus:outline-none">
                    <button id="chatbot-send" class="btn-primary px-4 rounded-lg">Send</button>
                </div>
            </div>
        </div>
    </div>


</body>

</html>